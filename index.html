<!-- index.html -->
<html>
  <head>
    <title>Hello React</title>
    <script src="https://fb.me/react-0.13.2.js"></script>
    <script src="https://fb.me/JSXTransformer-0.13.2.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <style>
      head, body {
        height: 100%;
        margin:0;
        padding:0;
        
        
      }
    </style>
  </head>
  <body>
    <div id="content"></div>
    
    <script type="text/jsx">
    
    var speciesData = {
      mammals: {
        name: 'Mammals',
        species: {
          'mountain_beaver': {
            name: 'Mountain Beaver',
            food: 'Sword Fern',
            niche: 'Herbivore, Consumer',
            habitat: 'Found in the Pacific Coast',
            author: 'Jason'
          },
        'san Joaquin kit fox': {
          name: 'San Juaquin Kit Fox',
          food: 'Kangaroo rats, Cottontail Rabbits, and Blacktail Jackrabbits',
          niche: 'Carnivor, Consumer',
          habitat: 'Southwest US and Central Mexico',
          reason_for_endangerment:'Climate change, Drought',
          author: 'Mishal',
          
        }
       
        
        },
      
      //ending of Mammals Loop
      },
      
      reptiles: {
        name: 'Reptiles',
        species: {}
      
        //ending of Reptiles Loop
      },
      birds:   {
        name: 'Birds',
        species: {
          'peregrine_falcon': {
            name: 'Peregrine Falcon',
            food: 'Pigeons, Doves, Waterfowl, Songbirds, and Waders',
            niche: 'Carnivore, Consumer',
            habitat: 'All Continents (except for Antarctica)',
            authors: 'Isra and Malaina',
            
          },
        'western_snowy_plover': {
            name: 'Western Snowy Plover',
            food: 'Small insects',
            niche: 'Carnivore',
            habitat: 'Beaches',
            authors: 'Tristan, Shaan, Arya, Isabella, Mary, and Vikram'
          },
          
        },
      
        //ending of Birds loop
      },
      amphibians: {
        name: 'Amphibians',
        species: {}
      
        //ending of Amphibians loop
      },
      insects: {
        name: 'Insects',
        species: {
          'langes_metalmark': {
            name: 'Langes Metalmark',
            food: 'Caterpillar: Naked Stemmed Buckwheat, Adult: Nectar',
            niche: 'Herbivore',
            habitat: 'Contra Costa County ~ antioch, Dunes National Wildlife Refuge',
            authors: 'Malaina and Mylan',
          },
        'delta green ground beetle': {
          name: 'Delta Green Ground Beetle',
          food: 'Soft Bodied Arthropods',
          niche: 'Carnivore, Consumer',
        },
          
        }
       
      
        //ending of Insect loop
      },
      
      fish: {
        name: 'Fish',
        species: {
          'coho_salmon': {
            name: 'Coho Salmon',
            food: 'Plankton, Insects, and small fish',
            niche: 'Carnivore, Consumer',
            habitat: 'Freshwater and shallow parts of the Pacific Ocean. The Gulf of Alaska',
            why_is_it_endangered:'',
            author: 'Isra',
          },
          //start here
          'tidewater_goby': {
            name: 'Tidewater Goby',
            food: 'Phytoplankton',
            niche: 'Omnivore, Consumer',
            habitat: 'Smith River, and the Agua Hedionda Lagoon',
            why_is_it_endangered: 'Bad at reproducing',
            authors: 'Timothy, Luke, Mishal, and Zidaan',
          },
          
        }
      
      //ending of Fish loop  
      },
        
        //end of loop
    };
      
    var Homepage = React.createClass({
      
      //Page turn thingy
      getInitialState: function() {
        return {
          animalClass: '',
          animal: '',
        };
      },
      changeAnimalClass: function(type) {
       
           //When I click this button it should take me to
           //that animal class thingy page
           //2nd clickey thing
           this.setState({ 
           animalClass: type,
           });
      },
      renderHomepage: function() {
        var animalClasses = [];
        var changeAnimalClass = this.changeAnimalClass;
        
        for (var type in speciesData) {
          //LIST!!!
          animalClasses.push(
            <li 
              key={type}
              >
                <a
                    href="#"
                    style={{
                      border: '1px solid black',
                      margin: 2,
                      padding: 2,
                      display: "block",
                      textDecoration: 'none',
                      color: 'white',
                      cursor: 'pointer',
                    }}
                    onClick={
                      function (type, e) {
                        e.preventDefault();
                        changeAnimalClass(type);
                      }.bind(this, type)
                      
                    }
                    
                >
                  {speciesData[type].name}
                </a>
            </li>
          );
        }
        
        return (
          <div style = {{
            background:"#1D728F",
            color: "silver",
            height: "100%"
          }}>
            <h1 style={{textAlign: "center"}}>My Animals App</h1>
            <ul style={{
                textAlign: "center",
                listStyle: "none",
                padding: 0,
                margin: 0,
                  
            }}>
              {animalClasses}
            </ul>
          </div>
        );
      },
      renderAnimalClass: function() {
        var changeAnimalClass = this.changeAnimalClass;
        var animalClass = this.state.animalClass;
        var animalClassName = speciesData[animalClass].name        //Mammals thingymabob that michelle fixed
        var speciesList = [];
        for(var species in speciesData[animalClass].species) {
          var name = (speciesData[animalClass].species[species].name)
          speciesList.push(<li><a 
                    href="" 
                    onClick={function (species, e) {
                        e.preventDefault();
                        this.setState({
                          animal: species,
                        })
                      }.bind(this, species)}
                    
                    style={{
                      border: '1px solid black',
                      margin: 2,
                      padding: 2,
                      display: "block",
                      textDecoration: 'none',
                      color: 'white',
                      cursor: 'pointer',
                    }}>{name}</a></li>)
        }
        return(
          <div style={{
            background:"#1D728F",
            color: "silver",
            height: "100%"}}>
          
          <a href="#"
          style= {{color:"white",textDecoration:"none"}}
          
          onClick={
            function (e) {
              e.preventDefault();
              changeAnimalClass("");
              
            }}          
          >Back</a>
          <h1 style= {{textAlign: "center"}}> {animalClassName} </h1>
          <ul style={{
                textAlign: "center",
                listStyle: "none",
                padding: 0,
                margin: 0,
                  
            }}>
              {speciesList}
            </ul>
          </div>
          );
      },
      renderAnimalPage: function() {
        var animal = this.state.animal;
        var animalObject = speciesData[this.state.animalClass].species[animal];
        return <div style= {{
          background:"#1D728F",
            color: "silver",
            height: "100%"}}>
          <a href="#"
          style= {{color:"white",textDecoration:"none"}}
          
          onClick={
            function (e) {
              e.preventDefault();
             this.setState({
               animal: '',
             })
              
            }.bind(this)
            
          }          
          >Back</a>
          <h1 style={{
            textAlign: "center"
            
          }}>{animalObject.name}</h1>
        </div>
        
      },
      render: function() {
        if (this.state.animal.length >0) {
          return this.renderAnimalPage()
        }
        if (this.state.animalClass.length > 0) {
          return this.renderAnimalClass();
          
        }
        return this.renderHomepage();
      }
    });
    React.render(
      <Homepage />,
      document.getElementById('content')
    );
    </script>
  </body>
</html>



